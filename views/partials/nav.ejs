<nav class="main-nav" aria-label="Main navigation">
  <ul class="nav-list">

    <%
      const currentPath = currentPath || '/'; // from res.render

      const links = [
        { href: '/',        label: 'Home' },
        { href: '/custom',  label: 'Custom Shop (All Vehicles)' },
        { href: '/sport',   label: 'Sport Cars' },
        { href: '/suv',     label: 'SUVs' },
        { href: '/sedan',   label: 'Sedans' },
        { href: '/truck',   label: 'Trucks' },
        { href: '/account', label: 'Account' }
      ];

      function isActive(href) {
        if (href === '/') {
          return currentPath === '/';
        }
        // Active on the main section and any sub-path, e.g. /sedan, /sedan/something
        return currentPath === href || currentPath.startsWith(href + '/');
      }
    %>

    <% links.forEach(link => { 
         const active = isActive(link.href);
    %>
      <li>
        <a href="<%= link.href %>"
           class="<%= active ? 'current-page' : '' %>"
           <%= active ? 'aria-current="page"' : '' %>>
          <%= link.label %>
        </a>
      </li>
    <% }) %>

    <!-- Assignment Testing Dropdown -->
    <li class="nav-dropdown">
      <button class="nav-dropdown-toggle" aria-expanded="false" aria-controls="testing-menu">
        Testing â–¼
      </button>
      <ul class="nav-dropdown-menu" id="testing-menu">
        <li><a href="/debug-db">Debug Database</a></li>
        <li><a href="/debug-vehicle/1">Test Vehicle #1</a></li>
        <li><a href="/trigger-error">Test Error Handling</a></li>
      </ul>
    </li>

  </ul>
</nav>
