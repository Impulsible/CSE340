<header class="site-header">
  <a class="skip-link" href="#main">Skip to content</a>

  <div class="brand-row">
    <p class="brand">CSE <span>Motors</span></p>
    <a class="account-link" href="/account" aria-label="My account">My Account</a>
  </div>

  <nav class="main-nav" aria-label="Main navigation">
    <ul class="nav-list">

      <% const links = [
           { href: '/', label: 'Home', active: title && title.startsWith('CSE Motors') },
           { href: '/custom', label: 'Custom Shop', active: title && title.startsWith('Custom') }
         ]; %>

      <% links.forEach(link => { %>
        <li>
          <a href="<%= link.href %>" <%= link.active ? 'class="current-page" aria-current="page"' : '' %>>
            <%= link.label %>
          </a>
        </li>
      <% }) %>

      <!-- Inventory Dropdown -->
      <li class="nav-dropdown">
        <button class="nav-dropdown-toggle" aria-expanded="false" aria-controls="inventory-menu">
          Inventory ▼
        </button>
        <ul class="nav-dropdown-menu" id="inventory-menu">
          <li class="dropdown-header">By Classification</li>
          <li><a href="/inv/type/1">Custom Vehicles</a></li>
          <li><a href="/inv/type/2">Sports Cars</a></li>
          <li><a href="/inv/type/3">SUVs</a></li>
          <li><a href="/inv/type/4">Trucks</a></li>
          <li><a href="/inv/type/5">Sedans</a></li>
          <li class="dropdown-divider"></li>
          <li class="dropdown-header">Featured Vehicles</li>
          <li><a href="/inv/detail/1">2018 Chevy Camaro</a></li>
          <li><a href="/inv/detail/2">2020 Ford Mustang</a></li>
          <li><a href="/inv/detail/3">2021 Batmobile Custom</a></li>
          <li><a href="/inv/detail/4">2016 GM Hummer</a></li>
          <li><a href="/inv/detail/5">2013 Ford Crown Victoria</a></li>
        </ul>
      </li>

      <!-- Assignment Testing Dropdown -->
      <li class="nav-dropdown">
        <button class="nav-dropdown-toggle" aria-expanded="false" aria-controls="testing-menu">
          Assignment Testing ▼
        </button>
        <ul class="nav-dropdown-menu" id="testing-menu">
          <li><a href="/test-vehicles">Test All Vehicles</a></li>
          <li><a href="/trigger-error">Test Error Handling</a></li>
        </ul>
      </li>

    </ul>
  </nav>
</header>
<script>
  // Dropdown toggle functionality
  document.querySelectorAll('.nav-dropdown-toggle').forEach(button => {
    button.addEventListener('click', () => {
      const expanded = button.getAttribute('aria-expanded') === 'true' || false;
      button.setAttribute('aria-expanded', !expanded);
      const menu = document.getElementById(button.getAttribute('aria-controls'));
      if (menu) {
        menu.style.display = expanded ? 'none' : 'block';
      }
    });
  });
</script>
