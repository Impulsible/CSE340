<div class="login-container">
  <h1 class="welcome"><%= title %></h1>
  <p>Create your account to track orders, service history, and saved builds.</p>

  <!-- Flash Messages -->
  <% if (flashMessages) { %>
    <% Object.keys(flashMessages).forEach(type => { %>
      <% flashMessages[type].forEach(message => { %>
        <div class="alert alert-<%= type %>">
          <%= message %>
        </div>
      <% }) %>
    <% }) %>
  <% } %>

  <!-- ðŸ”¥ SERVER-SIDE VALIDATION ERRORS (CSE 340 REQUIRED) -->
  <% if (errors && errors.array) { %>
    <ul class="notice" style="
      background: #f8d7da;
      padding: 12px;
      border-radius: 6px;
      border-left: 4px solid #721c24;
      margin-bottom: 20px;
    ">
      <% errors.array().forEach(error => { %>
        <li style="color:#721c24; margin-left:15px; font-size:15px;">
          <%= error.msg %>
        </li>
      <% }) %>
    </ul>
  <% } %>

  <form action="/account/register" method="post" novalidate>
    <!-- First Name -->
    <div class="form-group">
      <label for="account_firstname">First name</label>
      <input
        type="text"
        id="account_firstname"
        name="account_firstname"
        required
        placeholder="Enter your first name"
        value="<%= typeof account_firstname !== 'undefined' ? account_firstname : '' %>"
      >
    </div>

    <!-- Last Name -->
    <div class="form-group">
      <label for="account_lastname">Last name</label>
      <input
        type="text"
        id="account_lastname"
        name="account_lastname"
        required
        placeholder="Enter your last name"
        value="<%= typeof account_lastname !== 'undefined' ? account_lastname : '' %>"
      >
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="account_email">Email address</label>
      <input
        type="email"
        id="account_email"
        name="account_email"
        required
        placeholder="Enter a valid email address"
        value="<%= typeof account_email !== 'undefined' ? account_email : '' %>"
      >
    </div>

    <!-- Password -->
    <div class="form-group">
      <label for="account_password">Password</label>

      <div class="password-requirements">
        <strong>Password Requirements:</strong>
        <ul>
          <li>At least 12 characters</li>
          <li>At least 1 uppercase letter</li>
          <li>At least 1 number</li>
          <li>At least 1 special character</li>
        </ul>
      </div>

      <input
        type="password"
        id="account_password"
        name="account_password"
        required
        minlength="12"
        pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
        title="At least 12 characters, including 1 capital letter, 1 number, and 1 special character."
        placeholder="Create a strong password"
      >

      <!-- Strength bar -->
      <div class="password-strength"></div>
    </div>

    <button type="submit" class="btn-primary">Register</button>
  </form>

  <div class="register-link">
    <p>Already have an account? <a href="/account/login">Login here</a></p>
  </div>

  <p><a class="btn-secondary" href="/">Back to Home</a></p>
</div>
